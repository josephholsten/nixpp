#/!bin/sh
# g -  improved grep -r selector

if command -v rg > /dev/null
then
    G=rg
elif command -v pt > /dev/null
then
    G=pt
elif command -v sift > /dev/null
then
    G=sift
elif command -v ag > /dev/null
then
    G=ag
elif command -v ack-grep > /dev/null
then
    G=ack-grep
elif command -v ack > /dev/null
then
    G=ack
else
    G="grep -R" # gnu/bsd (not posix) default
fi

if [ x != x"$DEBUG" ]; then
    set -x
fi

args=`getopt :cinsv $*`

errcode=$?
if [ $errcode != 0 ]
then
    echo 'usage: g [-cinsv] [file...]' >&2
    exit 1
fi

set -- $args

# default file: '.'
if [ "$#" = 0 ]; then
    set .
fi

exec $G "$@"

